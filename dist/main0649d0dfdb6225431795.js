(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var i=e.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var n=i.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&!t;)t=n[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t={name:"Константин",surname:"Константинопольский",phone:"+7 988 123-45-67",email:"kostya@gmail.com",inn:"1234567890",creditCard:"1234 12•• •••• 1234",address:"Бишкек, улица Ахматбека Суюмбаева, 12/1"},i=[{id:1,title:"Футболка UZcotton мужская",manufacturer:"",color:"белый",size:56,stock:"Коледино WB",shop:"OOO Вайлдберриз",inStock:2,price:1051,discount:529,quantity:1},{id:2,title:"Силиконовый чехол картхолдер (отверстия) для карт, прозрачный кейс бампер на Apple iPhone XR,",manufacturer:"MobiSafe",color:"прозрачный",size:null,stock:"Коледино WB",shop:"OOO Мегапрофстиль",inStock:5e3,price:11500,discount:1e3,quantity:200},{id:3,title:'Карандаши цветные Faber-Castell "Замок", набор 24 цвета, заточенные, шестигранные,',manufacturer:"Faber-Castell",stock:"Коледино WB",shop:"OOO Вайлдберриз",inStock:2,price:475,discount:228,quantity:2}],n=[{id:4,title:"Футболка UZcotton мужская",manufacturer:"",color:"белый",size:56,stock:"Коледино WB",shop:"OOO Вайлдберриз",inStock:0,price:1051,discount:529},{id:5,title:"Силиконовый чехол картхолдер (отверстия) для карт, прозрачный кейс бампер на Apple iPhone XR, ",manufacturer:"MobiSafe",color:"прозрачный",size:null,stock:"Коледино WB",shop:"OOO Мегапрофстиль",inStock:0,price:11500,discount:1e3},{id:6,title:'Карандаши цветные Faber-Castell "Замок", набор 24 цвета, заточенные, шестигранные,',manufacturer:"Faber-Castell",stock:"Коледино WB",shop:"OOO Вайлдберриз",inStock:0,price:475,discount:228}],a=window.devicePixelRatio>1,s=".order",l=".cart__available",r=".cart__unavailable",c=".product",d=".customer",o={tabyshalieva:"Бишкек, улица Табышалиева, 57",jukeeva:"Бишкек, улица Жукеева-Пудовкина, 77/1",ahunbaeva:"Бишкек, микрорайон Джал, улица Ахунбаева Исы, 67/1",default:"Бишкек, улица Ахматбека Суюмбаева, 12/1"},_={mir:"../cards/icon_pay.svg",visa:"../cards/icon_visa.svg",mastercard:"../cards/icon_mastercard.svg",maestro:"../cards/icon_maestro.svg"},p={mir:"1234 12•• •••• 1234",visa:"1234 78•• •••• 1234",mastercard:"1234 98•• •••• 7534",maestro:"1234 96•• •••• 6531"};e.p,e.p;class u{rendered=!1;constructor(e){this.productId=e.id,this.productTitle=e.title,this.productManufacturer=e.manufacturer,this.productColor=e.color??"",this.productSize=e.size??"",this.productStock=e.stock,this.productShop=e.shop,this.productInStock=e.inStock,this.productPrice=e.price,this.productDiscount=e.discount,this.productQuantity=e.quantity??0,this.totalPrice=this.getTotalPrice(),this.fullTotalPrice=this.getFullTotalPrice(),this.productImg=a?"../img_retina/prod"+e.id+".jpg":"../img/prod"+e.id+".jpg",this.confirmed=!0}getTotalPrice(){return this.productQuantity*(this.productPrice-this.productDiscount)}getFullTotalPrice(){return this.productQuantity*this.productPrice}getDiscount(){return this.productQuantity*this.productDiscount}_getPriceString(e){return new Intl.NumberFormat("ru-RU").format(e)}changeQuantity(e){this.productQuantity+=e,this._updateItem()}_updateItem(){this.totalPrice=this.getTotalPrice(),this.fullTotalPrice=this.getFullTotalPrice();const e=document.querySelector(`${c}[data-id="${this.productId}"]`);e.querySelector(".cart__num").textContent=`${this.productQuantity}`,e.querySelector(".total").textContent=`${this._getPriceString(this.totalPrice)}`,e.querySelector(".cart__full").textContent=`${this._getPriceString(this.fullTotalPrice)} сом`,1===this.productQuantity?e.querySelector(".cart__minus").classList.add("lt-gray"):e.querySelector(".cart__minus").classList.remove("lt-gray"),this.productQuantity===this.productInStock?e.querySelector(".cart__plus").classList.add("lt-gray"):e.querySelector(".cart__plus").classList.remove("lt-gray")}markUp(){return this.rendered=!0,`\n      <div class="cart__product product" data-id="${this.productId}">\n        <label class="checkbox__label checkbox__product">\n          <input type="checkbox"\n                 class="cart__checkbox\n                 checkbox__input"\n                 data-id="${this.productId}"\n                 checked\n          >\n          <div class="fake-chb fake__item"></div>\n          <img class="cart__img" src="${this.productImg}" alt="Poduct">\n          <div class="checkbox__size ${this.productSize?"":"invisible"}">${this.productSize?this.productSize:""}</div>\n        </label>\n\n        <div class="cart__general">\n          <div class="cart__description">\n            <span>${this.productTitle}</span>\n            <span class="cart__manufacturer">${this.productManufacturer}</span>\n          </div>\n          <div class="cart__product-info ${this.productColor||this.productSize?"":"invisible"}">\n            <span>${this.productColor?"Цвет: "+this.productColor:""}</span>\n            <span class="cart__size">${this.productSize?"Размер: "+this.productSize:""}</span>\n          </div>\n          <div class="cart__stock ${this.productInStock?"":"invisible"}">${this.productStock}</div>\n          <div class="cart__shop-wrap">\n            <div class="cart__shop ${this.productInStock?"":"invisible"}">${this.productShop}</div>\n            <svg class="cart__svg-info" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <circle cx="10" cy="10" r="7.5" stroke="#9797AF"/>\n                <path d="M9.88867 7.58691C9.62826 7.58691 9.41504 7.51042 9.24902 7.35742C9.08301 7.20117 9 7.01074 9 6.78613C9 6.55501 9.08301 6.36621 9.24902 6.21973C9.41504 6.07324 9.62826 6 9.88867 6C10.1523 6 10.3656 6.07324 10.5283 6.21973C10.6943 6.36621 10.7773 6.55501 10.7773 6.78613C10.7773 7.02051 10.6943 7.21257 10.5283 7.3623C10.3656 7.51204 10.1523 7.58691 9.88867 7.58691ZM10.6504 13.3779H9.10742V8.37793H10.6504V13.3779Z" fill="#9797AF"/>\n            </svg>\n            <div class="cart__shop-info">\n              <div class="cart__shop-title">OOO «МЕГАПРОФСТИЛЬ»</div>\n              <div class="cart__shop-txt">ОГРН: 5167746237148</div>\n              <div class="cart__shop-txt">129337, Москва, улица Красная Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34</div>\n            </div>\n          </div>\n          \n        </div>\n      \n        <div class="cart__quantity-info">\n          <div class="cart__quantity">\n            <div class="cart__minus\n                        ${1===this.productQuantity?"lt-gray":""}"\n                 data-id="${this.productId}">\n                 &minus;\n            </div>\n            <span class="cart__num">${this.productQuantity}</span>\n            <div class="cart__plus\n                        ${this.productQuantity===this.productInStock?"lt-gray":""}"\n                 data-id="${this.productId}">+</div>\n          </div>\n          <div class="cart__remainder ${this.productInStock>15?"invisible":""}">Осталось ${this.productInStock} шт.</div>\n          <div class="cart__quantity-ic">\n\n            <svg class="cart__favorite" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path fill-rule="evenodd" clip-rule="evenodd" d="M3.03399 4.05857C2.26592 4.75224 1.76687 5.83284 1.99496 7.42928C2.22335 9.02783 3.26497 10.6852 4.80439 12.3478C6.25868 13.9184 8.10965 15.4437 9.99999 16.874C11.8903 15.4437 13.7413 13.9184 15.1956 12.3478C16.7351 10.6852 17.7767 9.02783 18.005 7.4293C18.2331 5.83285 17.734 4.75224 16.9659 4.05856C16.1767 3.34572 15.055 3 14 3C12.132 3 11.0924 4.08479 10.5177 4.68443C10.4581 4.7466 10.4035 4.80356 10.3535 4.85355C10.1583 5.04882 9.84169 5.04882 9.64643 4.85355C9.59644 4.80356 9.54185 4.7466 9.48227 4.68443C8.9076 4.08479 7.868 3 5.99999 3C4.94498 3 3.82328 3.34573 3.03399 4.05857ZM2.36374 3.31643C3.37372 2.40427 4.75205 2 5.99999 2C8.07126 2 9.34542 3.11257 9.99999 3.77862C10.6545 3.11257 11.9287 2 14 2C15.2479 2 16.6262 2.40428 17.6362 3.31644C18.6674 4.24776 19.2669 5.66715 18.995 7.5707C18.7233 9.47217 17.515 11.3148 15.9294 13.0272C14.3355 14.7486 12.3064 16.3952 10.3 17.9C10.1222 18.0333 9.87776 18.0333 9.69999 17.9C7.69356 16.3952 5.66446 14.7485 4.07063 13.0272C2.48506 11.3148 1.27668 9.47217 1.00501 7.57072C0.733043 5.66716 1.33253 4.24776 2.36374 3.31643Z"/>\n            </svg>\n          \n            <svg class="cart__delete delete" data-id="${this.productId}" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path class="delete" fill-rule="evenodd" data-id="${this.productId}" clip-rule="evenodd" d="M2.5 5C2.5 4.72386 2.72386 4.5 3 4.5H17C17.2761 4.5 17.5 4.72386 17.5 5C17.5 5.27614 17.2761 5.5 17 5.5H3C2.72386 5.5 2.5 5.27614 2.5 5Z"/>\n              <path class="delete" fill-rule="evenodd" data-id="${this.productId}" clip-rule="evenodd" d="M3.4584 4.5H16.5059L15.6411 15.6926C15.5405 16.9947 14.4546 18 13.1486 18H6.84639C5.54299 18 4.45829 16.9986 4.35435 15.6994L3.4584 4.5ZM4.5416 5.5L5.35117 15.6196C5.41353 16.3992 6.06435 17 6.84639 17H13.1486C13.9322 17 14.5837 16.3968 14.6441 15.6155L15.4256 5.5H4.5416Z"/>\n              <path class="delete" fill-rule="evenodd" data-id="${this.productId}" clip-rule="evenodd" d="M13 5.5H7V3.46875C7 2.65758 7.65758 2 8.46875 2H11.5312C12.3424 2 13 2.65758 13 3.46875V5.5ZM8.46875 3C8.20987 3 8 3.20987 8 3.46875V4.5H12V3.46875C12 3.20987 11.7901 3 11.5312 3H8.46875Z"/>\n            </svg>\n          </div>\n        </div>\n      \n        <div class="cart__sum">\n          <div>\n            <span class="total ${this.totalPrice>1e4?"cart__total_sm":"cart__total"}">${this._getPriceString(this.totalPrice)}</span><span class="cart__total_sm cart__total-text">сом</span>\n          </div>\n          <span class="cart__full ${this.fullTotalPrice>1e6?"cart__full_sm":""}">${this._getPriceString(this.fullTotalPrice)} сом</span>\n          <div class="cart__discount">\n          \n            <div class="cart__discount-info">\n              <span class="cart__discount-txt_gr">\n               Скидка 55%\n              </span>\n              <span class="cart__discount-txt">\n                -300 сом\n              </span>\n            </div>\n            \n            <div class="cart__discount-info">\n              <span class="cart__discount-txt_gr">\n               Скидка покупателя 10%\n              </span>\n              <span class="cart__discount-txt">\n                -30 сом\n              </span>\n            </div>\n\n            \n          </div>\n        </div>\n      </div>\n    `}markUpUnavailable(){return this.rendered=!0,`\n      <div class="cart__product-unavailable product" data-id="${this.productId}">\n        <div class="cart__unavailable-img">\n          <img class="cart__img_gray" src="${this.productImg}" alt="Poduct">\n          <div class="checkbox__size ${this.productSize?"":"invisible"}">${this.productSize?this.productSize:""}</div>\n          <div class="checkbox__size-sp ${6===this.productId?"":"invisible"}">56/54/52/50/48/46</div>\n        </div>\n             \n        <div>\n          <div class="cart__description_wider gray">\n            <span>${this.productTitle}</span>\n            <span>${this.productManufacturer}</span>\n        </div>\n        <div class="cart__product-info cart__product-info_gr gray ${this.productColor||this.productSize?"":"invisible"}">\n          <span>${this.productColor?"Цвет: "+this.productColor:""}</span>\n          <span class="cart__size">${this.productSize?"Размер: "+this.productSize:""}</span>\n        </div>\n      </div>\n      \n      <div class="cart__ic">\n            <svg class="cart__favorite" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path fill-rule="evenodd" clip-rule="evenodd" d="M3.03399 4.05857C2.26592 4.75224 1.76687 5.83284 1.99496 7.42928C2.22335 9.02783 3.26497 10.6852 4.80439 12.3478C6.25868 13.9184 8.10965 15.4437 9.99999 16.874C11.8903 15.4437 13.7413 13.9184 15.1956 12.3478C16.7351 10.6852 17.7767 9.02783 18.005 7.4293C18.2331 5.83285 17.734 4.75224 16.9659 4.05856C16.1767 3.34572 15.055 3 14 3C12.132 3 11.0924 4.08479 10.5177 4.68443C10.4581 4.7466 10.4035 4.80356 10.3535 4.85355C10.1583 5.04882 9.84169 5.04882 9.64643 4.85355C9.59644 4.80356 9.54185 4.7466 9.48227 4.68443C8.9076 4.08479 7.868 3 5.99999 3C4.94498 3 3.82328 3.34573 3.03399 4.05857ZM2.36374 3.31643C3.37372 2.40427 4.75205 2 5.99999 2C8.07126 2 9.34542 3.11257 9.99999 3.77862C10.6545 3.11257 11.9287 2 14 2C15.2479 2 16.6262 2.40428 17.6362 3.31644C18.6674 4.24776 19.2669 5.66715 18.995 7.5707C18.7233 9.47217 17.515 11.3148 15.9294 13.0272C14.3355 14.7486 12.3064 16.3952 10.3 17.9C10.1222 18.0333 9.87776 18.0333 9.69999 17.9C7.69356 16.3952 5.66446 14.7485 4.07063 13.0272C2.48506 11.3148 1.27668 9.47217 1.00501 7.57072C0.733043 5.66716 1.33253 4.24776 2.36374 3.31643Z"/>\n            </svg>\n\n            <svg class="cart__delete delete-unavailable" data-id="${this.productId}" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path class="delete-unavailable" fill-rule="evenodd" data-id="${this.productId}" clip-rule="evenodd" d="M2.5 5C2.5 4.72386 2.72386 4.5 3 4.5H17C17.2761 4.5 17.5 4.72386 17.5 5C17.5 5.27614 17.2761 5.5 17 5.5H3C2.72386 5.5 2.5 5.27614 2.5 5Z"/>\n              <path class="delete-unavailable" fill-rule="evenodd" data-id="${this.productId}" clip-rule="evenodd" d="M3.4584 4.5H16.5059L15.6411 15.6926C15.5405 16.9947 14.4546 18 13.1486 18H6.84639C5.54299 18 4.45829 16.9986 4.35435 15.6994L3.4584 4.5ZM4.5416 5.5L5.35117 15.6196C5.41353 16.3992 6.06435 17 6.84639 17H13.1486C13.9322 17 14.5837 16.3968 14.6441 15.6155L15.4256 5.5H4.5416Z"/>\n              <path class="delete-unavailable" fill-rule="evenodd" data-id="${this.productId}" clip-rule="evenodd" d="M13 5.5H7V3.46875C7 2.65758 7.65758 2 8.46875 2H11.5312C12.3424 2 13 2.65758 13 3.46875V5.5ZM8.46875 3C8.20987 3 8 3.20987 8 3.46875V4.5H12V3.46875C12 3.20987 11.7901 3 11.5312 3H8.46875Z"/>\n            </svg>\n          </div>\n      </div>\n    `}}class v{deliveryContainer=document.querySelector(".delivery");constructor(e,t){this.availableProducts=e,this.unavailableProducts=t,this._render()}_render(){this.deliveryContainer.insertAdjacentHTML("afterbegin",this._markUp())}_markUp(){return'\n      <header class="delivery__header">\n        <h2 class="delivery__h2">Способ доставки</h2>\n        <span class="delivery__edit edit-dlv">Изменить</span>\n      </header>\n      \n      <main>\n        <div class="delivery__info">\n          <span class="delivery__title delivery__type">Пункт выдачи</span>\n          <div class="delivery__address">\n            <span>Бишкек, улица Ахматбека Суюмбаева, 12/1</span>\n            <div class="delivery__hours">\n              <div class="delivery__star"></div>\n              <span class="delivery__rating">4.99</span>\n              <span>Ежедневно с 10 до 21</span>\n            </div>\n          </div>\n            \n          <span class="delivery__title">Стоимость доставки</span>\n          <span class="delivery__free">Бесплатно</span>\n        </div>\n\n        <div class="delivery__dates">           \n          <span class="delivery__title delivery__title_dt">5—6 февраля</span>\n          <div class="delivery__images" id="feb5">\n            <div class="delivery__img1 dlv" data-id="1"><div class="delivery__quantity" data-id="1"></div></div>\n            <div class="delivery__img2 dlv" data-id="2"><div class="delivery__quantity" data-id="2">184</div></div>\n            <div class="delivery__img3 dlv" data-id="3"><div class="delivery__quantity" data-id="3">2</div></div>\n          </div>\n            \n          <span class="delivery__title delivery__title_dt">7—8 февраля</span>\n          <div class="delivery__images" id="feb7">\n            <div class="delivery__img2 dlv" data-id="2"><div class="delivery__quantity">16</div></div>\n          </div>\n        </div>\n        \n      </main>\n      \n      <footer class="delivery__footer">\n        <div class="delivery__confirm"></div>\n        <div class="delivery__text-wrap">\n          <span class="delivery__price">Обратная доставка товаров на склад при отказе &mdash;</span><span class="delivery__price_cl">бесплатно</span>\n          <div class="delivery__return-info">Если товары вам не подойдут, мы вернем иx обратно на склад — это бесплатно</div>\n        </div>\n      </footer>\n    '}}class h{paymentContainer=document.querySelector(".payment");constructor(e){this.creditCard=e,this._render()}_render(){this.paymentContainer.insertAdjacentHTML("afterbegin",this._markUp())}_markUp(){return`\n      <header class="payment__header">\n        <h2 class="payment__h2">Способ оплаты</h2>\n        <span class="payment__edit edit-pm">Изменить</span>        \n      </header>\n      \n      <main class="payment__main">\n        <div class="payment__logo"></div>\n        <div class="payment__card">${this.creditCard}</div>\n        <div class="payment__expiry">01/30</div>\n      </main>\n      \n      <footer class="payment__footer">\n        <div class="payment__text">Спишем оплату с карты при получении</div>\n      </footer>\n    `}}class m{customerContainer=document.querySelector(d);constructor(e){this.customer=e,this._render(),this._init()}_render(){this.customerContainer.insertAdjacentHTML("afterbegin",this._markUp())}_getMailText(){return window.innerWidth<=1023.9?"Электронная почта":"Почта"}_checkContent(e,t,i){i.test(t)?(e.target.parentNode.querySelector(".customer__error").classList.add("hidden"),e.target.classList.remove("red")):(e.target.parentNode.querySelector(".customer__error").classList.remove("hidden"),e.target.classList.add("red"))}_phoneMask(e){e.target;let t="+7 ___ ___-__-__",i=0,n=t.replace(/\D/g,""),a=e.target.value.replace(/\D/g,"");"blur"===e.type&&a.length<t.match(/([\d])/g).length?e.target.value="":(n.length>=a.length&&(a=n),e.target.value=t.replace(/./g,(function(e){return/[_\d]/.test(e)&&i<a.length?a.charAt(i++):i>=a.length?"":e})))}_init(){this.customerContainer.addEventListener("change",(e=>{if(e.target.classList.contains("customer__name")){let t=e.target.value.trim(),i=/^[а-яА-ЯЁё ]+$/;this._checkContent(e,t,i)}if(e.target.classList.contains("customer__mail")){let t=e.target.value.trim(),i=/^([!#$=%&*+{}|?/~a-zA-Z0-9]+(\.?[!#$%=&*\-+{}|?/~\w]+)*@([\w-]{1,253}\.)[\w-]{2,4})?$/;this._checkContent(e,t,i)}if(e.target.classList.contains("customer__inn")){let t=e.target.value.trim().replace(/[ -\.]/g,"");/^[0-9]+$/.test(t)&&12===t.length?(e.target.parentNode.querySelector(".customer__error").classList.add("invisible"),e.target.parentNode.querySelector(".customer__info").classList.remove("invisible"),e.target.classList.remove("red")):(e.target.parentNode.querySelector(".customer__error").classList.remove("invisible"),e.target.parentNode.querySelector(".customer__info").classList.add("invisible"),e.target.classList.add("red"))}}));let e=document.querySelector(".customer__phone");for(let t of["input","focus"])e.addEventListener(t,this._phoneMask);e.addEventListener("blur",(e=>{e.target.classList.contains("customer__phone")&&(11!==e.target.value.trim().replace(/[\+ -]/g,"").length?(e.target.parentNode.querySelector(".customer__error").classList.remove("hidden"),e.target.classList.add("red")):(e.target.parentNode.querySelector(".customer__error").classList.add("hidden"),e.target.classList.remove("red")))}))}_markUp(){return`\n      <header class="customer__header">\n        <h2 class="customer__h2">Получатель</h2>\n      </header>\n      \n      <main class="customer__main">\n        <form class="customer__form">\n        \n          <div class="customer__fio">\n            <div class="customer__name-wrap">\n              <div class="customer__title hidden">Имя</div>\n              <input type="text" class="customer__name fio" maxlength="45" placeholder="Имя" name="name">\n              <div class="customer__error hidden">Укажите имя</div>\n            </div>\n            <div class="customer__surname-wrap">\n              <div class="customer__title hidden">Фамилия</div>\n              <input type="text" class="customer__name fio" maxlength="45" placeholder="Фамилия" name="surname">\n              <div class="customer__error hidden">Укажите фамилию</div>\n            </div>\n          </div>\n          \n          <div class="customer__contact">\n            <div class="customer__mail-wrap">\n              <div class="customer__title hidden">${this._getMailText()}</div>\n              <input type="email" class="customer__mail" maxlength="45" placeholder="${this._getMailText()}" name="mail">\n              <div class="customer__error hidden">Укажите почту</div>\n            </div>\n            <div class="customer__phone-wrap">\n              <div class="customer__title">Телефон</div>\n              <input type="text" class="customer__phone" placeholder="${this.customer.phone}" name="phone">\n              <div class="customer__error hidden">Укажите телефон</div>\n            </div>\n            <div class="customer__inn-wrap">\n              <div class="customer__title hidden">ИНН</div>\n              <input type="text" class="customer__inn" maxlength="45" placeholder="ИНН" name="inn">\n              <div class="customer__info">Для таможенного оформления</div>\n              <div class="customer__error invisible">Укажите ИНН</div>\n            </div>\n          </div>\n        </form>\n      </main>\n    `}}class C{orderContainer=document.querySelector(s);constructor(e,t,i){this.availableProducts=t,this.unavailableProducts=i,this._render(),this.delivery=new v(this.availableProducts,this.unavailableProducts),this.payment=new h(e.creditCard),this.customer=new m(e)}_render(){this.orderContainer.insertAdjacentHTML("beforeend",this._markUp())}_markUp(){return'\n        <section class="delivery"><div class="delivery__bg"></div></section>\n        <section class="payment"><div class="payment__bg"></div></section>\n        <section class="customer"><div class="customer__bg"></section>\n      '}}class g{invoiceContainer=document.querySelector(".invoice");constructor(e,t){this.products=e,this.client=t,this._render(),this._init()}getPriceString(e){return new Intl.NumberFormat("ru-RU").format(e)}getQuantity(){let e=0;return this.products.forEach((t=>{t.confirmed&&(e+=t.productQuantity)})),e}getTotal(){let e=0;return this.products.forEach((t=>{t.confirmed&&(e+=t.totalPrice)})),e}getFullTotal(){let e=0;return this.products.forEach((t=>{t.confirmed&&(e+=t.fullTotalPrice)})),e}getDiscount(){return this.getFullTotal()-this.getTotal()}update(){this.invoiceContainer.querySelector(".invoice__quantity").textContent=this.getQuantity(),this.invoiceContainer.querySelector(".invoice__quantity-caption").textContent=this.getCaption(this.getQuantity()),this.invoiceContainer.querySelector(".invoice__total-num").textContent=this.getPriceString(this.getTotal()),this.invoiceContainer.querySelector(".invoice__full-num").textContent=this.getPriceString(this.getFullTotal()),this.invoiceContainer.querySelector(".invoice__discount").textContent=this.getPriceString(this.getDiscount()),this._installBtnText()}_installBtnText(){let e=this.invoiceContainer.querySelector(".invoice__btn");this.invoiceContainer.querySelector(".invoice__input").checked?(e.textContent=`Оплатить ${this.getPriceString(this.getTotal())} сом`,e.classList.add("invoice__btn_mt"),this.invoiceContainer.querySelector(".invoice__post").classList.add("invisible")):(e.textContent="Заказать",e.classList.remove("invoice__btn_mt"),this.invoiceContainer.querySelector(".invoice__post").classList.remove("invisible"))}_render(){this.invoiceContainer.insertAdjacentHTML("afterbegin",this._markUp())}moveToCustomer(e){e.classList.add("red"),e.parentNode.querySelector(".customer__error").classList.remove("hidden"),document.querySelector(d).scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}getCaption(e){let t=["товар","товара","товаров"];switch(e%10){case 1:return 1!==Math.floor(e%100/10)?t[0]:t[2];case 2:case 3:case 4:return 1!==Math.floor(e%100/10)?t[1]:t[2];default:return t[2]}}_init(){this.invoiceContainer.addEventListener("click",(e=>{if(e.target.classList.contains("invoice__btn")){const e={name:document.querySelector('input[name="name"]'),surname:document.querySelector('input[name="surname"]'),mail:document.querySelector('input[name="mail"]'),inn:document.querySelector('input[name="inn"]')};let t=document.querySelector('input[name="phone"]'),i=t.value;i&&16!==i.length&&this.moveToCustomer(t);for(let t in e)e[t].value||this.moveToCustomer(e[t])}e.target.classList.contains("invoice__input")&&this._installBtnText()}))}_markUp(){return`\n    <form action="#" class="invoice__form">\n      <header class="invoice__total-wrap">\n        <div>\n            Итого\n        </div>\n        <div class="invoice__total">\n            <span class="invoice__total-num">${this.getPriceString(this.getTotal())}</span><span class="invoice__total-currency">сом</span>\n        </div>\n      </header>\n      \n      <section class="invoice__details">\n        <div><span class="invoice__quantity">${this.getQuantity()}</span> <span class="invoice__quantity-caption">товара</span></div>\n        <div class="invoice__sum"><span class="invoice__full-num">${this.getPriceString(this.getFullTotal())}</span> сом</div>\n        <div>Скидка</div>\n        <div class="invoice__sum">&minus;<span class="invoice__discount">${this.getPriceString(this.getDiscount())}</span> сом</div>\n        <div>Доставка</div>\n        <div class="invoice__sum">Бесплатно</div>\n      </section>\n      \n      <section class="invoice__delivery">\n        <div class="invoice__header">\n          <h3 class="invoice__title">Доставка в пункт выдачи</h3>\n          <div class="invoice__edit edit-dlv"></div>\n        </div>\n        <div class="invoice__address">Бишкек, улица Ахматбека Суюмбаева, 12/1</div>\n        <span class="invoice__dates">5&ndash;8 фев</span>\n        <div class="invoice__return">\n          <div class="invoice__confirm"></div>\n          <div class="invoice__text-wrap">\n            <span class="invoice__text">Обратная доставка товаров на&nbsp;склад при&nbsp;отказе &mdash;</span><span class="invoice__text_cl">бесплатно</span>\n            <div class="invoice__return-info">Если товары вам не&nbsp;подойдут, мы вернем иx обратно на&nbsp;склад — это бесплатно</div>\n          </div>\n        </div>\n      </section>\n      \n      <section class="invoice__payment-wrap">\n        <div class="invoice__header">\n          <h3 class="invoice__title">Оплата картой</h3>\n          <div class="invoice__edit edit-pm"></div>\n        </div>\n        \n        <div class="invoice__payment">\n          <div class="invoice__logo"></div>\n          <div class="invoice__card">${this.client.creditCard}</div>\n        </div>\n        \n        <div class="invoice__choice">\n          <label class="invoice__label">\n            <input class="invoice__input" type="checkbox" id="choice">\n            <div class="invoice__fake"></div>\n            <span class="invoice__payment-txt">Списать оплату сразу</span>\n          </label>\n          <span class="invoice__payment-txt invoice__post">Спишем оплату с карты при получении</span>\n        </div>\n      </section>\n      <button class="invoice__btn" type="button">Заказать</button>\n    </form>\n    \n    <div class="invoice__rules">\n      <div class="invoice__ticking"></div>\n      <div class="invoice__agreement">\n        Соглашаюсь <span class="invoice__agreement-inderline">с&nbsp;правилами пользования торговой площадкой</span> и&nbsp;<span class="invoice__agreement-inderline">возврата</span>\n      </div>\n    </div>\n    `}}new class{headerContainer=document.querySelector(".footer");constructor(){this._render(),this._init()}_markUp(){return'\n      <div class="footer__wrap">\n        <div class="footer__copyright">&copy; 2022</div>\n        <div class="footer__brand">ООО «Товары и точка»</div>\n      </div>  \n      <div class="footer-mob">\n        <div class="footer-mob__wrap">\n          <div class="footer-mob__item">\n            <svg width="28" height="29" viewBox="0 0 28 29" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path fill-rule="evenodd" clip-rule="evenodd" d="M3.39249 13.7635C2.43526 14.7047 3.10172 16.333 4.44418 16.333H4.99997V22.3332C4.99997 23.4378 5.89541 24.3332 6.99997 24.3332H11.25C11.5261 24.3332 11.75 24.1093 11.75 23.8332V20.7433C11.75 19.6387 12.6454 18.7433 13.75 18.7433H14.25C15.3545 18.7433 16.25 19.6387 16.25 20.7433V23.8332C16.25 24.1093 16.4738 24.3332 16.75 24.3332H21C22.1045 24.3332 23 23.4378 23 22.3332V16.333H23.3787C24.7151 16.333 25.3843 14.7173 24.4393 13.7724L14.7012 4.03434C14.313 3.64615 13.6844 3.6435 13.2929 4.02842L3.39249 13.7635Z" fill="#CCCCCC"/>\n            </svg>\n          </div>\n          <div class="footer-mob__item">\n            <svg width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <g clip-path="url(#clip0_13_122)">\n                <rect width="28" height="28" transform="translate(0.5 0.333252)" fill="white"/>\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M20.2961 17.8333L23.1846 20.7217C23.2211 20.7583 23.2568 20.7955 23.2914 20.8333H27C27.8285 20.8333 28.5 20.1617 28.5 19.3333C28.5 18.5048 27.8285 17.8333 27 17.8333H20.2961ZM20.1278 8.83325C19.7007 7.73683 19.1026 6.72591 18.3662 5.83325H27C27.8285 5.83325 28.5 6.50482 28.5 7.33325C28.5 8.16168 27.8285 8.83325 27 8.83325H20.1278ZM20.8735 12.82C20.8735 12.4874 20.8587 12.1583 20.8298 11.8333H27C27.8285 11.8333 28.5 12.5048 28.5 13.3333C28.5 14.1617 27.8285 14.8333 27 14.8333H20.6891C20.8103 14.1799 20.8735 13.5068 20.8735 12.82Z" fill="#CCCCCC"/>\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M4.3999 12.82C4.3999 9.78974 6.85639 7.33325 9.88663 7.33325C12.9169 7.33325 15.3734 9.78974 15.3734 12.82C15.3734 15.8502 12.9169 18.3067 9.88663 18.3067C6.85639 18.3067 4.3999 15.8502 4.3999 12.82ZM0.899902 12.82C0.899902 7.85675 4.9234 3.83325 9.88663 3.83325C14.8499 3.83325 18.8734 7.85675 18.8734 12.82C18.8734 14.1704 18.5755 15.4513 18.0419 16.6004C17.7159 17.3024 17.7875 18.1533 18.3348 18.7006L21.7702 22.136C22.3872 22.753 22.3872 23.7535 21.7702 24.3705C21.1531 24.9876 20.1527 24.9876 19.5356 24.3705L16.2116 21.0465C15.6412 20.4761 14.7457 20.4241 14.0301 20.7966C12.7903 21.4419 11.3811 21.8067 9.88663 21.8067C4.9234 21.8067 0.899902 17.7832 0.899902 12.82Z" fill="#CCCCCC"/>\n              </g>\n              <defs>\n                <clipPath id="clip0_13_122">\n                <rect width="28" height="28" fill="white" transform="translate(0.5 0.333252)"/>\n                </clipPath>\n              </defs>\n            </svg>\n          </div>\n          <div class="footer-mob__item footer-mob__cart">\n          <svg width="28" height="29" viewBox="0 0 28 29" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M10.3248 18.4744C10.4895 18.9686 10.99 19.2688 11.5036 19.1814L24.1601 17.0281C24.596 16.954 24.9396 16.616 25.0209 16.1813L26.5023 8.25891C26.5592 7.95471 26.3289 7.67241 26.0194 7.66708L7.35686 7.34608C6.99275 7.33982 6.7318 7.69539 6.84695 8.04086L10.3248 18.4744Z" fill="#CB11AB"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M23.75 25.3333C24.9926 25.3333 26 24.3259 26 23.0833C26 21.8406 24.9926 20.8333 23.75 20.8333C22.5074 20.8333 21.5 21.8406 21.5 23.0833C21.5 24.3259 22.5074 25.3333 23.75 25.3333Z" fill="#CB11AB"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M10.75 25.3333C11.9926 25.3333 13 24.3259 13 23.0833C13 21.8406 11.9926 20.8333 10.75 20.8333C9.50736 20.8333 8.5 21.8406 8.5 23.0833C8.5 24.3259 9.50736 25.3333 10.75 25.3333Z" fill="#CB11AB"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M2.45442 3.56046C3.1177 3.41833 4.01745 3.33325 5 3.33325C5.98255 3.33325 6.8823 3.41833 7.54558 3.56046C7.87345 3.63072 8.16489 3.71927 8.38495 3.83075C8.4917 3.88484 8.61185 3.959 8.71511 4.06714C8.80017 4.15621 9 4.40237 9 4.83325C9 5.26413 8.80017 5.5103 8.71511 5.59937C8.61185 5.7075 8.4917 5.78167 8.38495 5.83575C8.16489 5.94724 7.87345 6.03579 7.54558 6.10604C6.8823 6.24818 5.98255 6.33325 5 6.33325C4.01745 6.33325 3.1177 6.24818 2.45442 6.10604C2.12655 6.03579 1.83511 5.94724 1.61505 5.83575C1.5083 5.78167 1.38815 5.7075 1.28489 5.59937C1.19983 5.5103 1 5.26413 1 4.83325C1 4.40237 1.19983 4.15621 1.28489 4.06714C1.38815 3.959 1.5083 3.88484 1.61505 3.83075C1.83511 3.71927 2.12655 3.63072 2.45442 3.56046Z" fill="#CB11AB"/>\n          </svg>\n          <div class="footer-mob__quantity quantity"></div>\n          </div>\n          <div class="footer-mob__item"><svg width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.9791 23.7496C14.6019 24.0835 14.0344 24.0835 13.6576 23.7491C8.25224 18.9528 3.5 14.2808 3.5 10.3115C3.5 6.94183 6.11818 4.33325 9.50011 4.33325C11.1584 4.33325 12.8167 5.02852 14.007 6.18601C14.2282 6.40108 14.59 6.40108 14.8112 6.18601C16.0015 5.02852 17.6599 4.33325 19.3182 4.33325C22.7 4.33325 25.3182 6.94183 25.3182 10.3115C25.3182 14.2809 20.3979 18.9531 14.9791 23.7496Z" fill="#CCCCCC"/>\n</svg>\n          </div>\n          <div class="footer-mob__item">\n            <svg width="28" height="29" viewBox="0 0 28 29" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path fill-rule="evenodd" clip-rule="evenodd" d="M2.80005 22.7061C2.80005 23.7739 3.54488 24.3333 5.62764 24.3333H21.9725C24.0552 24.3333 24.8 23.7739 24.8 22.7061C24.8 19.6044 20.5656 15.3333 13.8069 15.3333C7.03453 15.3333 2.80005 19.6044 2.80005 22.7061Z" fill="#CCCCCC"/>\n              <path fill-rule="evenodd" clip-rule="evenodd" d="M18.8 8.26675C18.8 11.1204 16.4913 13.3333 13.8001 13.3333C11.1088 13.3333 8.80006 11.1204 8.80006 8.29093C8.78692 5.4977 11.122 3.33325 13.8001 3.33325C16.4781 3.33325 18.8 5.44933 18.8 8.26675Z" fill="#CCCCCC"/>\n            </svg>\n          </div>      \n        </div>\n      </div>\n    '}_render(){this.headerContainer.insertAdjacentHTML("afterbegin",this._markUp())}_init(){}},new class{availableProducts=[];unavailableProducts=[];orderContainer=document.querySelector(s);constructor(){this.handleData(i,this.availableProducts),this.handleData(n,this.unavailableProducts),this._setCounter(),this._render(),this._init(),this.client=new C(t,this.availableProducts,this.unavailableProducts),this.invoice=new g(this.availableProducts,this.client.customer.customer)}_countUnavailable(){return this.unavailableProducts.length}_countAvailable(){return this.availableProducts.length}_setCounter(){document.querySelectorAll(".quantity").forEach((e=>{let t=this._countAvailable();e.textContent=t?this._countAvailable():""}))}getQuantity(){let e=0;return this.availableProducts.forEach((t=>{e+=t.productQuantity})),e}getSum(){let e=0;return this.availableProducts.forEach((t=>{e+=t.totalPrice})),e}_setBrieflyInfo(){let e=document.querySelector(".cart__briefly-quantity"),t=document.querySelector(".cart__briefly-sum"),i=this.getQuantity();i?(e.textContent=i+" "+this.invoice.getCaption(i),t.textContent=this.invoice.getPriceString(this.getSum())+" сом"):this._addClass(".cart__control","invisible")}_setUnavailableInfo(){let e=document.querySelector(".cart__unavailable-quantity"),t=this.unavailableProducts.length;t?e.textContent=t+" "+this.invoice.getCaption(t):this._addClass(".cart__unavailable-wrap","invisible")}_render(){this.orderContainer.insertAdjacentHTML("afterbegin",this._markUp());let e=document.querySelector(l),t=document.querySelector(r);for(let t of this.availableProducts)t.rendered||e.insertAdjacentHTML("beforeend",t.markUp());for(let e of this.unavailableProducts)e.rendered||t.insertAdjacentHTML("beforeend",e.markUpUnavailable())}handleData(e,t){for(let i of e)t.push(new u(i))}_markUp(){return`\n      <section class = "cart">\n        <h1 class = "cart__heading">Корзина</h1>\n        <div class="cart__control">\n          <label class="checkbox__label checkbox__all">\n            <input type="checkbox" class="cart__checkbox checkbox__input-all" checked>\n            <div class="fake-chb fake__all"></div>\n            <span class="checkbox__text">Выбрать все</span>\n          </label>\n\n          <div class="cart__briefly invisible">\n            <span class="cart__briefly-quantity">203 товаров</span>\n            <div class="point"></div>\n            <span class="cart__briefly-sum">2 101 016 сом</span>\n          </div>\n          \n          <label class="arrow__available">\n            <input type="checkbox" class="cart__arrow-available">\n            <div class="fake-arrow"></div>\n          </label>\n        </div>\n        \n        <div class="cart__available"></div>\n        \n        <div class="cart__unavailable-wrap">\n        <div class="cart__unheading-wrap">\n          <div class="cart__unavailable-heading">\n            <span>Отсутствуют</span>\n            <div class="point"></div>\n            <span class="cart__unavailable-quantity">${this._countUnavailable()} товара</span>\n          </div>\n          \n          <label class="arrow__unavailable">\n            <input type="checkbox" class="cart__arrow-unavailable">\n            <div class="fake-arrow"></div>\n          </label>\n          </div>\n         \n          <div class="cart__unavailable"></div>\n        </div>\n      </section>\n    `}getItem(e){return this.availableProducts.find((t=>t.productId===e))}getItemUnavailable(e){return this.unavailableProducts.find((t=>t.productId===e))}deleteItem(e){e.productQuantity>1?e.changeQuantity(-1):(this.availableProducts.splice(this.availableProducts.indexOf(e),1),this.removeMarkUp(e.productId))}deleteAll(e){this.availableProducts.splice(this.availableProducts.indexOf(e),1),this.removeMarkUp(e.productId)}deleteUnavailable(e){this.unavailableProducts.splice(this.unavailableProducts.indexOf(e),1),this.removeMarkUp(e.productId)}_handleDatesVisibility(){document.querySelectorAll(".delivery__images").forEach((e=>{let t=e.querySelectorAll(".dlv"),i=[];t.forEach((t=>{t.classList.contains("invisible")||i.push(!0),0===i.length?e.previousElementSibling.classList.add("invisible"):e.previousElementSibling.classList.remove("invisible")}))}))}removeMarkUp(e){document.querySelector(`${c}[data-id="${e}"]`).remove()}_setDeliveryCounter(e,t){let i=document.querySelector("#feb5").querySelector(`.delivery__quantity[data-id="${e}"]`),n=0==+i.textContent?1:+i.textContent;"add"===t&&(i.textContent=n+1),"delete"===t&&(i.textContent=2===n?"":n-1)}_addClass(e,t){document.querySelector(e).classList.add(t)}_removeClass(e,t){document.querySelector(e).classList.remove(t)}_toggleInvisible(e){this.orderContainer.querySelector(e).classList.toggle("invisible")}_removeDeliveryDates(){this._addClass(".delivery__dates","invisible")}_init(){this.orderContainer.addEventListener("click",(e=>{if(e.target.classList.contains("cart__arrow-available")&&(this._toggleInvisible(l),this._toggleInvisible(".cart__briefly"),this._toggleInvisible(".fake__all"),this._toggleInvisible(".checkbox__text")),e.target.classList.contains("cart__arrow-unavailable")&&this._toggleInvisible(r),e.target.classList.contains("cart__plus")){const t=+e.target.dataset.id;let i=this.getItem(t);if(i.productQuantity===i.productInStock)return;i.productQuantity<i.productInStock&&i.changeQuantity(1),this._setCounter(),this._setDeliveryCounter(t,"add"),this.invoice.update(),this._setBrieflyInfo()}if(e.target.classList.contains("cart__minus")){const t=+e.target.dataset.id;let i=this.getItem(t);if(1===i.productQuantity)return;i.productQuantity>1&&this.deleteItem(i),this._setCounter(),this._setDeliveryCounter(t,"delete"),this.invoice.update(),this._setBrieflyInfo()}if(e.target.classList.contains("delete")){const t=+e.target.dataset.id;let i=this.getItem(t);this.deleteAll(i),document.querySelectorAll(`.dlv[data-id="${t}"]`).forEach((e=>e.remove())),this._setCounter(),this.invoice.update(),this.availableProducts.length||this._removeDeliveryDates(),this._setBrieflyInfo()}if(e.target.classList.contains("delete-unavailable")){const t=+e.target.dataset.id;let i=this.getItemUnavailable(t);this.deleteUnavailable(i),this._setUnavailableInfo()}if(e.target.classList.contains("cart__favorite")&&e.target.classList.toggle("cart__favorite_colored"),e.target.classList.contains("checkbox__input-all")){let e=document.querySelectorAll(".dlv"),t=document.getElementsByClassName("checkbox__input");if(document.querySelector(".checkbox__input-all").checked){for(let e=0;e<t.length;e++)t[e].checked=!0;e.forEach((e=>e.classList.remove("invisible"))),this.availableProducts.forEach((e=>{e.confirmed=!0}))}else{for(let e=0;e<t.length;e++)t[e].checked=!1;e.forEach((e=>e.classList.add("invisible"))),this.availableProducts.forEach((e=>{e.confirmed=!1}))}this._handleDatesVisibility(),this.invoice.update()}if(e.target.classList.contains("checkbox__input")){const t=+e.target.dataset.id;let i=document.querySelectorAll(`.dlv[data-id="${t}"]`);const n=this.getItem(t);e.target.checked?(i.forEach((e=>e.classList.remove("invisible"))),n.confirmed=!0):(document.querySelector(".checkbox__input-all").checked=!1,i.forEach((e=>e.classList.add("invisible"))),n.confirmed=!1),this._handleDatesVisibility(),this.invoice.update()}})),document.querySelector(".main").addEventListener("click",(e=>{e.target.classList.contains("edit-dlv")&&(document.querySelector(".popup").classList.remove("invisible"),document.querySelector(".popup__delivery").classList.remove("invisible")),e.target.classList.contains("edit-pm")&&(document.querySelector(".popup").classList.remove("invisible"),document.querySelector(".popup__payment").classList.remove("invisible"))}))}},new class{popupContainer=document.querySelector(".popup");constructor(){this._render(),this._init()}_render(){this.popupContainer.insertAdjacentHTML("afterbegin",this._markUp())}_setDeliveryText(e){let t=document.querySelector(".invoice__delivery .invoice__title"),i=document.querySelector(".invoice__delivery .invoice__address"),n=document.querySelector(".delivery__type"),a=document.querySelector(".delivery__address"),s=document.querySelectorAll('.popup__delivery input[type="radio"]'),l="";s.forEach((e=>{e.checked&&(l=e.value)})),"courier"===e?(t.textContent="Доставка курьером",n.textContent="Курьер"):(t.textContent="Доставка в пункт выдачи",n.textContent="Пункт выдачи"),i.textContent=o[l]??o.default,a.textContent=o[l]??o.default,l||(t.textContent="Доставка в пункт выдачи",n.textContent="Пункт выдачи")}_setPaymentCard(){let e=document.querySelector(".invoice__logo"),t=document.querySelector(".invoice__card"),i=document.querySelector(".payment__card"),n=document.querySelector(".payment__logo"),a=document.querySelectorAll('.popup__payment input[type="radio"]'),s="",l="";a.forEach((e=>{e.checked&&(s=e.value,l=p[s])})),e.style.background=`url(${_[s]})`,n.style.background=`url(${_[s]})`,t.textContent=l,i.textContent=l}_init(){let e=document.querySelector(".popup__delivery"),t=document.querySelector(".popup__payment");e.addEventListener("click",(t=>{let i=t.target.classList;if(t.target.classList.contains("popup__option")){let i=e.querySelectorAll(".popup__pickup");"courier"===t.target.attributes["data-name"].value?(this._addClass('.popup__option[data-name="courier"]',"popup__opted"),this._removeClass('.popup__option[data-name="pickup"]',"popup__opted"),i.forEach((e=>{e.classList.add("invisible")}))):(this._addClass('.popup__option[data-name="pickup"]',"popup__opted"),this._removeClass('.popup__option[data-name="courier"]',"popup__opted"),i.forEach((e=>{e.classList.remove("invisible")})))}if(i.contains("popup__close")&&this._closePopup(".popup__delivery"),i.contains("popup__btn")){this._closePopup(".popup__delivery");let t=e.querySelector(".popup__opted").getAttribute("data-name");this._setDeliveryText(t)}if(i.contains("popup__delete-addr")){let e=t.target.getAttribute("data-address");document.querySelector(`.popup__grid[data-address=${e}]`).remove()}})),t.addEventListener("click",(e=>{let t=e.target.classList;t.contains("popup__close")&&this._closePopup(".popup__payment"),t.contains("popup__btn")&&(this._closePopup(".popup__payment"),this._setPaymentCard())}))}_closePopup(e){this._addClass(".popup","invisible"),this._addClass(e,"invisible")}_addClass(e,t){document.querySelector(e).classList.add(t)}_removeClass(e,t){document.querySelector(e).classList.remove(t)}_markUp(){return`\n      <div class="popup__delivery invisible">\n        <header class="popup__header">\n          <span class="popup__title">Способ доставки</span>\n          <div class="popup__close"></div>\n        </header>\n\n        <main class="popup__main">\n          <div class="popup__options">\n            <div class="popup__option" data-name="pickup">В пункт выдачи</div>\n            <div class="popup__option popup__opted" data-name="courier">Курьером</div>\n          </div>\n\n          <div class="popup__my-addresses">\n            <div class="popup__subtitle">Мои адреса</div>\n\n            <div class="popup__grid" data-address="tabyshalieva">\n              <label class="popup__label">\n                <input  type="radio" name="address-delivery" value="tabyshalieva" checked>\n                <div class="popup__fake"></div>\n                <div class="popup__addr">\n                  Бишкек, улица Табышалиева, 57\n                  <div class="popup__pickup invisible">\n                    <div class="delivery__star popup__star"></div>\n                    <span class="delivery__rating">4.99</span>\n                    <span class="popup__pickup_gr">Пункт выдачи</span>\n                  </div>\n                </div>\n              </label>\n\n              <svg class="popup__delete popup__delete-addr" width="20" height="20" viewBox="0 0 20 20" fill="none" data-address="tabyshalieva">\n                <path class="popup__delete-addr" data-address="tabyshalieva" fill-rule="evenodd" clip-rule="evenodd" d="M2.5 5C2.5 4.72386 2.72386 4.5 3 4.5H17C17.2761 4.5 17.5 4.72386 17.5 5C17.5 5.27614 17.2761 5.5 17 5.5H3C2.72386 5.5 2.5 5.27614 2.5 5Z" fill="black"/>\n                <path class="popup__delete-addr" data-address="tabyshalieva" fill-rule="evenodd" clip-rule="evenodd" d="M3.4584 4.5H16.5059L15.6411 15.6926C15.5405 16.9947 14.4546 18 13.1486 18H6.84639C5.54299 18 4.45829 16.9986 4.35435 15.6994L3.4584 4.5ZM4.5416 5.5L5.35117 15.6196C5.41353 16.3992 6.06435 17 6.84639 17H13.1486C13.9322 17 14.5837 16.3968 14.6441 15.6155L15.4256 5.5H4.5416Z" fill="black"/>\n                <path class="popup__delete-addr" data-address="tabyshalieva" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.5H7V3.46875C7 2.65758 7.65758 2 8.46875 2H11.5312C12.3424 2 13 2.65758 13 3.46875V5.5ZM8.46875 3C8.20987 3 8 3.20987 8 3.46875V4.5H12V3.46875C12 3.20987 11.7901 3 11.5312 3H8.46875Z" fill="black"/>\n              </svg>      \n            </div>\n\n            <div class="popup__grid" data-address="jukeeva">\n              <label class="popup__label">\n                <input  type="radio" name="address-delivery" value="jukeeva">\n                <div class="popup__fake"></div>\n                <div class="popup__addr">\n                  Бишкек, улица Жукеева-Пудовкина, 77/1\n                  <div class="popup__pickup invisible">\n                    <div class="delivery__star popup__star"></div>\n                      <span class="delivery__rating">4.99</span>\n                      <span class="popup__pickup_gr">Пункт выдачи</span>\n                    </div>\n                  </div>\n              </label>\n\n              <svg class="popup__delete popup__delete-addr" width="20" height="20" viewBox="0 0 20 20" fill="none" data-address="jukeeva">\n                <path class="popup__delete-addr" data-address="jukeeva" fill-rule="evenodd" clip-rule="evenodd" d="M2.5 5C2.5 4.72386 2.72386 4.5 3 4.5H17C17.2761 4.5 17.5 4.72386 17.5 5C17.5 5.27614 17.2761 5.5 17 5.5H3C2.72386 5.5 2.5 5.27614 2.5 5Z" fill="black"/>\n                <path class="popup__delete-addr" data-address="jukeeva" fill-rule="evenodd" clip-rule="evenodd" d="M3.4584 4.5H16.5059L15.6411 15.6926C15.5405 16.9947 14.4546 18 13.1486 18H6.84639C5.54299 18 4.45829 16.9986 4.35435 15.6994L3.4584 4.5ZM4.5416 5.5L5.35117 15.6196C5.41353 16.3992 6.06435 17 6.84639 17H13.1486C13.9322 17 14.5837 16.3968 14.6441 15.6155L15.4256 5.5H4.5416Z" fill="black"/>\n                <path class="popup__delete-addr" data-address="jukeeva" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.5H7V3.46875C7 2.65758 7.65758 2 8.46875 2H11.5312C12.3424 2 13 2.65758 13 3.46875V5.5ZM8.46875 3C8.20987 3 8 3.20987 8 3.46875V4.5H12V3.46875C12 3.20987 11.7901 3 11.5312 3H8.46875Z" fill="black"/>\n              </svg>\n            </div>\n\n            <div class="popup__grid" data-address="ahunbaeva">\n              <label class="popup__label">\n                <input  type="radio" name="address-delivery" value="ahunbaeva">\n                <div class="popup__fake"></div>\n                <div class="popup__addr">\n                  Бишкек, микрорайон Джал, улица Ахунбаева Исы, 67/1\n                  <div class="popup__pickup invisible">\n                    <div class="delivery__star popup__star"></div>\n                    <span class="delivery__rating">4.99</span>\n                    <span class="popup__pickup_gr">Пункт выдачи</span>\n                  </div>\n                </div>\n              </label>\n\n              <svg class="popup__delete popup__delete-addr" width="20" height="20" viewBox="0 0 20 20" fill="none" data-address="ahunbaeva">\n                <path class="popup__delete-addr" data-address="ahunbaeva" fill-rule="evenodd" clip-rule="evenodd" d="M2.5 5C2.5 4.72386 2.72386 4.5 3 4.5H17C17.2761 4.5 17.5 4.72386 17.5 5C17.5 5.27614 17.2761 5.5 17 5.5H3C2.72386 5.5 2.5 5.27614 2.5 5Z" fill="black"/>\n                <path class="popup__delete-addr" data-address="ahunbaeva" fill-rule="evenodd" clip-rule="evenodd" d="M3.4584 4.5H16.5059L15.6411 15.6926C15.5405 16.9947 14.4546 18 13.1486 18H6.84639C5.54299 18 4.45829 16.9986 4.35435 15.6994L3.4584 4.5ZM4.5416 5.5L5.35117 15.6196C5.41353 16.3992 6.06435 17 6.84639 17H13.1486C13.9322 17 14.5837 16.3968 14.6441 15.6155L15.4256 5.5H4.5416Z" fill="black"/>\n                <path class="popup__delete-addr" data-address="ahunbaeva" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.5H7V3.46875C7 2.65758 7.65758 2 8.46875 2H11.5312C12.3424 2 13 2.65758 13 3.46875V5.5ZM8.46875 3C8.20987 3 8 3.20987 8 3.46875V4.5H12V3.46875C12 3.20987 11.7901 3 11.5312 3H8.46875Z" fill="black"/>\n              </svg>\n            </div>\n          </div>\n\n        </main>\n\n        <button class="popup__btn" type="button">Выбрать</button>\n      </div>\n      \n      <div class="popup__payment invisible">\n        <header class="popup__header">\n          <span class="popup__title">Способ оплаты</span>\n          <div class="popup__close"></div>\n        </header>\n        \n        <div class="popup__payment-options">\n          <label class="popup__label popup__label_mb">\n            <input  type="radio" name="payment-option" value="mir" checked>\n            <div class="popup__fake"></div>\n            <div class="popup__mir"></div>\n            <div class="popup__number">\n              ${p.mir}\n            </div>\n          </label>\n              \n          <label class="popup__label popup__label_mb">\n            <input  type="radio" name="payment-option" value="visa">\n            <div class="popup__fake"></div>\n            <div class="popup__visa"></div>\n            <div class="popup__number">\n              ${p.visa}\n            </div>\n          </label>\n              \n          <label class="popup__label popup__label_mb">\n            <input  type="radio" name="payment-option" value="mastercard">\n            <div class="popup__fake"></div>\n            <div class="popup__mastercard"></div>\n            <div class="popup__number">\n              ${p.mastercard}\n            </div>\n          </label>\n              \n          <label class="popup__label popup__label_mb">\n            <input  type="radio" name="payment-option" value="maestro">\n            <div class="popup__fake"></div>\n            <div class="popup__maestro"></div>\n            <div class="popup__number">\n              ${p.maestro}\n            </div>\n          </label>\n        </div>\n        \n        <button class="popup__btn popup__btn_mt" type="button">Выбрать</button>\n      </div>\n    `}},window.devicePixelRatio})();